<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <link rel="stylesheet" href="./style.css">
        <meta charset="utf-8">
        <title>KLO-Pokebase</title>
    </head>
    <body>
        <div id="PanelContainer">
            <div id="ListContainer">
                <div class="pokeCard">
                    <img src="./img/sprites/forward/1.png"/>
                    <p>#001 Bub</p>
                </div>
            </div>
            <div id="SearchContainer">
                <h1 class="Underline">Search</h1>
                <input type="text" name="SearchBox" value="" id="SearchBar">

                <h2 class="Underline">Sort by</h2>
                <div id="SortByContainer">
                    <button type="button" name="SortNum" id="SortActive">Num</button>
                    <button type="button" name="SortName">Name</button>
                    <button type="button" name="SortWeight">Weight</button>
                </div>
                <h2 class="Underline">Filters</h2>
                <h3>Types</h3>
                <div id="TypeGridContainer">
                    <input type="checkbox" name="water" id="water">
                    <label for="water">Water</label>
                    <input type="checkbox" name="normal" id="normal">
                    <label for="normal">Normal</label>
                    <input type="checkbox" name="flying" id="flying">
                    <label for="flying">Flying</label>
                    <input type="checkbox" name="grass" id="grass">
                    <label for="grass">Grass</label>
                    <input type="checkbox" name="psychic" id="psychic">
                    <label for="psychic">Psychic</label>
                    <input type="checkbox" name="bug" id="bug">
                    <label for="bug">Bug</label>
                    <input type="checkbox" name="fire" id="fire">
                    <label for="fire">Fire</label>
                    <input type="checkbox" name="poison" id="poison">
                    <label for="poison">Poison</label>
                    <input type="checkbox" name="ground" id="ground">
                    <label for="ground">Ground</label>
                    <input type="checkbox" name="rock" id="rock">
                    <label for="rock">Rock</label>
                    <input type="checkbox" name="fighting" id="fighting">
                    <label for="fighting">Fighting</label>
                    <input type="checkbox" name="dark" id="dark">
                    <label for="dark">Dark</label>
                    <input type="checkbox" name="steel" id="steel">
                    <label for="steel">Steel</label>
                    <input type="checkbox" name="electric" id="electric">
                    <label for="electric">Electric</label>
                    <input type="checkbox" name="dragon" id="dragon">
                    <label for="dragon">Dragon</label>
                    <input type="checkbox" name="fairy" id="fairy">
                    <label for="fairy">Fairy</label>
                    <input type="checkbox" name="ghost" id="ghost">
                    <label for="ghost">Ghost</label>
                    <input type="checkbox" name="ice" id="ice">
                    <label for="ice">Ice</label>
                </div>
                <button class="resetButton" id="TypeUnfilterButton">Unfilter</button>

                <h3>Color</h3>
                <div id="ColorContainer">
                    <input type="radio" name="color" id="red">
                    <input type="radio" name="color" id="blue">
                    <input type="radio" name="color" id="yellow">
                    <input type="radio" name="color" id="green">
                    <input type="radio" name="color" id="black">
                    <input type="radio" name="color" id="brown">
                    <input type="radio" name="color" id="purple">
                    <input type="radio" name="color" id="gray">
                    <input type="radio" name="color" id="white">
                    <input type="radio" name="color" id="pink">
                </div>
                <button class="resetButton" id="colorUnfilterButton">Unfilter</button>
                <h3>Body type</h3>
                <div id="BodyTypeContainer">
                    <input type="radio" name="bodyType" id="head">
                    <label for="head">
                        <img src="./img/bodytypes/Body01.png">
                    </label>
                    <input type="radio" name="bodyType" id="headAndLegs">
                    <label for="headAndLegs">
                        <img src="./img/bodytypes/Body07.png">
                    </label>
                    <input type="radio" name="bodyType" id="fins">
                    <label for="fins">
                        <img src="./img/bodytypes/Body03.png">
                    </label>
                    <input type="radio" name="bodyType" id="insect">
                    <label for="insect">
                        <img src="./img/bodytypes/Body14.png">
                    </label>
                    <input type="radio" name="bodyType" id="quadruped">
                    <label for="quadruped">
                        <img src="./img/bodytypes/Body08.png">
                    </label>
                    <input type="radio" name="bodyType" id="multipleWings">
                    <label for="multipleWings">
                        <img src="./img/bodytypes/Body13.png">
                    </label>
                    <input type="radio" name="bodyType" id="multiple">
                    <label for="multiple">
                        <img src="./img/bodytypes/Body11.png">
                    </label>
                    <input type="radio" name="bodyType" id="multiped">
                    <label for="multiped">
                        <img src="./img/bodytypes/Body10.png">
                    </label>
                    <input type="radio" name="bodyType" id="headAndBase">
                    <label for="headAndBase">
                        <img src="./img/bodytypes/Body05.png">
                    </label>
                    <input type="radio" name="bodyType" id="bipedWithTail">
                    <label for="bipedWithTail">
                        <img src="./img/bodytypes/Body06.png">
                    </label>
                    <input type="radio" name="bodyType" id="bipedNoTail">
                    <label for="bipedNoTail">
                        <img src="./img/bodytypes/Body12.png">
                    </label>
                    <input type="radio" name="bodyType" id="oneWings">
                    <label for="oneWings">
                        <img src="./img/bodytypes/Body09.png">
                    </label>
                    <input type="radio" name="bodyType" id="serpentine">
                    <label for="serpentine">
                        <img src="./img/bodytypes/Body02.png">
                    </label>
                    <input type="radio" name="bodyType" id="headAndArms">
                    <label for="headAndArms">
                        <img src="./img/bodytypes/Body04.png">
                    </label>
                </div>
                <button class="resetButton" id="BodyTypeUnfilterButton">Unfilter</button>
            </div>
        </div>

    </body>
    <script type="text/javascript">
        function parsePokemon () {
            var json = JSON.parse(this.responseText);
            console.log(json)
            var newJson = {};
            newJson["name"] = json["name"];
            newJson["types"] = [];
            for (var i = 0; i < json["types"].length; i++) {
                newJson["types"].push(json["types"][i]["type"]["name"]);
            }
            newJson["weight"] = json["weight"]/10;
            newJson["height"] = json["height"]/10;
            newJson["color"] = "";
            newJson["bodytype"] = "";
            newJson["stats"] = {};
            for (var i = 0; i < json["stats"].length; i++) {
                var tempString = json["stats"][i]["stat"]["name"];
                newJson["stats"][[tempString]] = json["stats"][i]["base_stat"];
            }
            location.href = "data:application/octet-stream," + encodeURIComponent(JSON.stringify(newJson));
        }



        function convertPokemon(id) {
            var oReq = new XMLHttpRequest();
            oReq.addEventListener("load", parsePokemon);
            oReq.open("GET", "https://pokeapi.co/api/v2/pokemon/" + id + "/");
            oReq.send();
        }

        let typeGridResetButton = document.getElementById("TypeUnfilterButton");
        typeGridResetButton.onclick = unfilterTypeGrid;

        function unfilterTypeGrid() {
          var un = document.getElementById('TypeGridContainer').getElementsByTagName("input");
            for (var i = 0; i < un.length; i++) {
              un[i].checked = false;
            }
        }

        let ColorResetButton = document.getElementById("colorUnfilterButton");
        ColorResetButton.onclick = unfilterColor;

        function unfilterColor() {
          var un = document.getElementById('ColorContainer').getElementsByTagName("input");
            for (var i = 0; i < un.length; i++) {
              un[i].checked = false;
            }
        }

    </script>
</html>
